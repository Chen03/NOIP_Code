# 1.27 纪中集训总结

## ~~游记~~

- 龙哥成功AK
- 至于某人~~一直在摸鱼的边缘徘徊~~一直在摸鱼

## 题解

- T1：二进制
- T2：分治
  - 主要思想是利用分治, 将左右端点分成三部分, 同属于一个区间的左右端点继续递归分治, 而分居两个区间的端点, 利用$max/min$区间是单调递增的性质, 枚举一个区间, 另一个区间分成三部分直接计算, 把复杂度降低为$O(nlogn)$
  - 对于当前区间[l..r]，我们可以从中点m+1开始向右遍历，分别构造一个从m+1开始的max和min及max*min的“前缀和”
  - 然后，我们从m开始向左枚举左端点l，设`min_l max_l`分别是[l..m]的最大值和最小值
  - 接着，对于每一个$l$，分别二分查找右区间（m右）第一个小于`min_l`的节点$u$，第一个大于`max_l`的节点$v$，现在的右区间分成了三部分：
  
    $(m,u)$|$[u,v)$|$[v,r]$
    -|-|-
    （$u$和$v$可以互换）
  - $(m,u)$: 所有右端点在这个区间内的区间$[l..r]$的最大值和最小值都分别是`min_l max_l`, 可以直接计算
  - $[u,v)$: 最大值同上, 但最小值取决于$min(m+1,r)$, 所以可以用前缀和计算(分配率)
  - $[v,r]$: 此时最小值同上面最大值, 这时直接加上min*max的前缀和即可

